<!DOCTYPE html>
<html lang="en">

<head>
  <title>DigitalOcean Functions.</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <style>
    .footer {
      position: absolute;
      bottom: 0;
      width: 620px;
      height: 45px;
      background-color: #f5f5f5;
      margin-bottom: 150px;
    }
  </style>
</head>

<body style="padding-top:100px">
  <div class="container" style="width:650px">

    <h2>DigitalOcean Functions.<br /></h2>
    <form id="myform" onsubmit="generate(); return false">
      <div class="form-group">
        <input id="mytext" class="form-control" style="float:left;width:85%;" type="text" name="text" maxlength="1024"
          placeholder="enter text here and click Resize" value="" />
        <button id="mysubmitjs" type="button" class="btn btn-primary">Resize</button>
      </div>
      <div style=" margin:auto" id="myresult">
      </div>
    </form>
  </div>

  <script type="text/javascript">
    var last = undefined

    $("#mysubmitjs").click(function () {
      doit()
    })

    function doit() {
      var txt = $("#mytext").val().trim()
      if (last != txt) {
        last = txt
        let API = 'https://faas-nyc1-26c15.doserverless.io/api/v1/web/fn-2e3df038-fe44-4d03-9b49-2bcf8eb41e2f/default/resize'
        let src = API + '?url=' + escape(txt)
        $("#myresult").html('<img width="200" style="display:block; margin:auto;padding-top:10px" src="' + src + '" />')
      }
    }
  </script>
</body>

</html>